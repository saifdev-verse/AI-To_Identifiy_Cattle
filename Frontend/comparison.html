<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Breed Comparison - Indian Livestock</title>
  <meta name="google" content="notranslate">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
     #google_translate_element {
      position: fixed;
      top: 15px;
      right: 20px;
      z-index: 2000;
      background: rgba(255,255,255,0.8);
      padding: 6px 10px;
      border-radius: 10px;
      font-size: 0.9rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }

    .goog-te-banner-frame.skiptranslate, 
    .goog-te-gadget-icon 
    {
      display: none !important;
    }

    body {
      top: 0 !important;
    }

    #google_translate_element select {
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #777;
      font-size: 14px;
      background: white;
    }

    h1 {
      text-align: center;
      color: white;
      margin-bottom: 30px;
      font-size: 2.5rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .back-link {
      display: inline-block;
      color: white;
      text-decoration: none;
      margin-bottom: 20px;
      padding: 10px 20px;
      background: rgba(255,255,255,0.2);
      border-radius: 8px;
      backdrop-filter: blur(10px);
      transition: 0.3s;
    }

    .back-link:hover {
      background: rgba(255,255,255,0.3);
      transform: translateX(-5px);
    }

    .selector-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }

    .breed-selector {
      background: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.2);
    }

    .breed-selector h2 {
      color: #667eea;
      margin-bottom: 15px;
      text-align: center;
    }

    select {
      width: 100%;
      padding: 12px;
      border: 2px solid #667eea;
      border-radius: 8px;
      font-size: 16px;
      font-family: "Poppins", sans-serif;
      cursor: pointer;
      transition: 0.3s;
    }

    select:hover {
      border-color: #764ba2;
    }

    select:focus {
      outline: none;
      border-color: #764ba2;
      box-shadow: 0 0 0 3px rgba(118, 75, 162, 0.1);
    }

    .compare-btn {
      display: block;
      width: 100%;
      max-width: 300px;
      margin: 20px auto;
      padding: 15px 30px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }

    .compare-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
    }

    .compare-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .comparison-container {
      display: none;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    .comparison-container.show {
      display: grid;
    }

    .breed-column {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(0,0,0,0.2);
    }

    .breed-header {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 25px;
      text-align: center;
    }

    .breed-header h2 {
      font-size: 2rem;
      margin-bottom: 10px;
    }

    .breed-header .animal-type {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    .breed-content {
      padding: 25px;
    }

    .info-section {
      margin-bottom: 25px;
    }

    .info-section h3 {
      color: #667eea;
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 2px solid #667eea;
      font-size: 1.2rem;
    }

    .info-item {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .info-item:last-child {
      border-bottom: none;
    }

    .info-label {
      font-weight: 600;
      color: #555;
      flex: 0 0 45%;
    }

    .info-value {
      color: #333;
      flex: 0 0 50%;
      text-align: right;
    }

    .highlight-better {
      background: #d4edda;
      padding: 5px 10px;
      border-radius: 5px;
      font-weight: 600;
      color: #155724;
    }

    .loading {
      text-align: center;
      padding: 40px;
      color: white;
      font-size: 1.3rem;
    }

    .error {
      background: #f8d7da;
      color: #721c24;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      margin: 20px 0;
      border: 2px solid #f5c6cb;
    }

    @media (max-width: 968px) {
      .selector-container,
      .comparison-container {
        grid-template-columns: 1fr;
      }

      h1 {
        font-size: 1.8rem;
      }

      .breed-header h2 {
        font-size: 1.5rem;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <a href="home.html" class="back-link">‚Üê Back to Home</a>
    
    <h1>üêÑ Compare Breeds</h1>

    <div class="selector-container">
      <div class="breed-selector">
        <h2>Select First Breed</h2>
        <select id="breed1">
          <option value="">-- Choose a breed --</option>
        </select>
      </div>

      <div class="breed-selector">
        <h2>Select Second Breed</h2>
        <select id="breed2">
          <option value="">-- Choose a breed --</option>
        </select>
      </div>
    </div>

    <button class="compare-btn" id="compareBtn" onclick="compareBreeds()">
      üîç Compare Breeds
    </button>

    <div id="results"></div>
  </div>

  <script>
        let breedsData = [];

        // Load all breeds on page load
        async function loadBreeds() {
        try {
            const response = await fetch('http://127.0.0.1:8000/breeds/');
            const data = await response.json();
            
            if (data.success) {
            breedsData = data.breeds;
            populateSelectors(data.breeds);
            }
        } catch (error) {
            console.error('Error loading breeds:', error);
            document.getElementById('results').innerHTML = `
            <div class="error">
                <strong>‚ö†Ô∏è Error</strong>
                <p>Could not load breeds. Make sure the backend is running.</p>
            </div>
            `;
        }
        }

        function populateSelectors(breeds) {
        const breed1Select = document.getElementById('breed1');
        const breed2Select = document.getElementById('breed2');

        breeds.forEach(breed => {
            const option1 = document.createElement('option');
            option1.value = breed.breed_id;
            option1.textContent = `${breed.breed_name} (${breed.animal_type})`;
            breed1Select.appendChild(option1);

            const option2 = document.createElement('option');
            option2.value = breed.breed_id;
            option2.textContent = `${breed.breed_name} (${breed.animal_type})`;
            breed2Select.appendChild(option2);
        });
        }

        async function compareBreeds() {
        const breed1Id = document.getElementById('breed1').value;
        const breed2Id = document.getElementById('breed2').value;
        const resultsDiv = document.getElementById('results');
        const compareBtn = document.getElementById('compareBtn');

        if (!breed1Id || !breed2Id) {
            alert('Please select both breeds to compare!');
            return;
        }

        if (breed1Id === breed2Id) {
            alert('Please select two different breeds!');
            return;
        }

        resultsDiv.innerHTML = '<div class="loading">‚è≥ Loading breed information...</div>';
        compareBtn.disabled = true;

        try {
            const [data1, data2] = await Promise.all([
            fetch(`http://127.0.0.1:8000/breeds/${breed1Id}`).then(r => r.json()),
            fetch(`http://127.0.0.1:8000/breeds/${breed2Id}`).then(r => r.json())
            ]);

            if (data1.success && data2.success) {
            displayComparison(data1.data, data2.data);
            } else {
            throw new Error('Failed to fetch breed data');
            }
        } catch (error) {
            console.error('Error:', error);
            resultsDiv.innerHTML = `
            <div class="error">
                <strong>‚ö†Ô∏è Error</strong>
                <p>Could not load breed information. Please try again.</p>
            </div>
            `;
        } finally {
            compareBtn.disabled = false;
        }
        }

        function formatValue(value) {
        if (value === null || value === undefined || value === '') {
            return 'Not available';
        }
        return value;
        }

        function displayComparison(data1, data2) {
        const resultsDiv = document.getElementById('results');
        
        const html = `
            <div class="comparison-container show">
            <!-- Breed 1 -->
            <div class="breed-column">
                <div class="breed-header">
                <h2>${formatValue(data1.breed.breed_name)}</h2>
                <div class="animal-type">${formatValue(data1.breed.animal_type)}</div>
                </div>
                <div class="breed-content">
                ${generateBreedInfo(data1)}
                </div>
            </div>

            <!-- Breed 2 -->
            <div class="breed-column">
                <div class="breed-header">
                <h2>${formatValue(data2.breed.breed_name)}</h2>
                <div class="animal-type">${formatValue(data2.breed.animal_type)}</div>
                </div>
                <div class="breed-content">
                ${generateBreedInfo(data2)}
                </div>
            </div>
            </div>
        `;

        resultsDiv.innerHTML = html;
        }

        function generateBreedInfo(data) {
        let html = '';

        // Basic Information
        if (data.breed) {
            html += `
            <div class="info-section">
                <h3>üìç Origin</h3>
                <div class="info-item">
                <span class="info-label">Country</span>
                <span class="info-value">${formatValue(data.breed.origin_country)}</span>
                </div>
                <div class="info-item">
                <span class="info-label">State</span>
                <span class="info-value">${formatValue(data.breed.origin_state)}</span>
                </div>
                <div class="info-item">
                <span class="info-label">Region</span>
                <span class="info-value">${formatValue(data.breed.origin_region)}</span>
                </div>
            </div>
            `;
        }

        // Economic Usage
        if (data.economic_usage) {
            html += `
            <div class="info-section">
                <h3>üíº Economic Usage</h3>
            `;
            Object.keys(data.economic_usage).forEach(key => {
            if (key !== 'breed_id') {
                const label = key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                html += `
                <div class="info-item">
                    <span class="info-label">${label}</span>
                    <span class="info-value">${formatValue(data.economic_usage[key])}</span>
                </div>
                `;
            }
            });
            html += `</div>`;
        }

        // Physical Characteristics
        if (data.physical_characteristics) {
            html += `
            <div class="info-section">
                <h3>üìè Physical Characteristics</h3>
            `;
            Object.keys(data.physical_characteristics).forEach(key => {
            if (key !== 'breed_id') {
                const label = key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                html += `
                <div class="info-item">
                    <span class="info-label">${label}</span>
                    <span class="info-value">${formatValue(data.physical_characteristics[key])}</span>
                </div>
                `;
            }
            });
            html += `</div>`;
        }

        // Production Data
        if (data.production_data) {
            html += `
            <div class="info-section">
                <h3>ü•õ Production Data</h3>
            `;
            Object.keys(data.production_data).forEach(key => {
            if (key !== 'breed_id') {
                const label = key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                html += `
                <div class="info-item">
                    <span class="info-label">${label}</span>
                    <span class="info-value">${formatValue(data.production_data[key])}</span>
                </div>
                `;
            }
            });
            html += `</div>`;
        }

        // Reproduction & Health
        if (data.reproduction_health) {
            html += `
            <div class="info-section">
                <h3>üî¨ Reproduction & Health</h3>
            `;
            Object.keys(data.reproduction_health).forEach(key => {
            if (key !== 'breed_id') {
                const label = key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                html += `
                <div class="info-item">
                    <span class="info-label">${label}</span>
                    <span class="info-value">${formatValue(data.reproduction_health[key])}</span>
                </div>
                `;
            }
            });
            html += `</div>`;
        }

        return html;
        }

        // Load breeds when page loads
        loadBreeds();
  </script>

   <!-- Google Translate Dropdown -->
   <div id="google_translate_element" style="position: absolute; top: 20px; right: 20px;"></div>

   <script type="text/javascript">
   function googleTranslateElementInit() {
     new google.translate.TranslateElement(
       {
         pageLanguage: 'en',
         includedLanguages: 'en,hi,ta,te,ml,kn,gu,mr,pa,bn,ur,as,ne,fr,de,es,ar', // Add any languages you want
         layout: google.translate.TranslateElement.InlineLayout.SIMPLE
       },
       'google_translate_element'
     );
   }
   </script>

   <script type="text/javascript" 
   src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit">
   </script>
</body>
</html>